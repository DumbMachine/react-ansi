{"remainingRequest":"/Users/raohai/works/react-ansi/node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js??ref--11-1!/Users/raohai/works/react-ansi/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js??ref--11-2!/Users/raohai/works/react-ansi/node_modules/_source-map-loader@0.2.4@source-map-loader/index.js!/Users/raohai/works/react-ansi/src/RawLogger.tsx","dependencies":[{"path":"/Users/raohai/works/react-ansi/src/RawLogger.tsx","mtime":1560051780884},{"path":"/Users/raohai/works/react-ansi/node_modules/_cache-loader@3.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_source-map-loader@0.2.4@source-map-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9yYW9oYWkvd29ya3MvcmVhY3QtYW5zaS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CnZhciBfanN4RmlsZU5hbWUgPSAiL1VzZXJzL3Jhb2hhaS93b3Jrcy9yZWFjdC1hbnNpL3NyYy9SYXdMb2dnZXIudHN4IjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGVudGVyTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkuZW50ZXJNb2R1bGU7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IEFuc2VyIGZyb20gJ2Fuc2VyJzsKaW1wb3J0IHsgZXNjYXBlQ2FycmlhZ2VSZXR1cm4gfSBmcm9tICdlc2NhcGUtY2FycmlhZ2UnOwppbXBvcnQgc3R5bGVzIGZyb20gJy4vbG9nLm1vZHVsZS5sZXNzJzsKdmFyIExJTktfUkVHRVggPSAvKGh0dHBzPzpcL1wvKD86d3d3XC58KD8hd3d3KSlbXlxzXC5dK1wuW15cc117Mix9fHd3d1wuW15cc10rXC5bXlxzXXsyLH0pLzsKLyoqCiAqIENyZWF0ZSBhIGNsYXNzIHN0cmluZy4KICogQG5hbWUgY3JlYXRlQ2xhc3MKICogQGZ1bmN0aW9uCiAqIEBwYXJhbSB7QW5zZXJKc29uRW50cnl9LgogKiBAcmV0dXJuIHtTdHJpbmd9IGNsYXNzIG5hbWUocykKICovCgpmdW5jdGlvbiBjcmVhdGVDbGFzcyhidW5kbGUpIHsKICB2YXIgY2xhc3NOYW1lcyA9ICcnOwoKICBpZiAoIWJ1bmRsZS5iZyAmJiAhYnVuZGxlLmZnKSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICBpZiAoYnVuZGxlLmJnKSB7CiAgICBjbGFzc05hbWVzICs9IGJ1bmRsZS5iZyArICcgJzsKICB9CgogIGlmIChidW5kbGUuZmcpIHsKICAgIGNsYXNzTmFtZXMgKz0gYnVuZGxlLmZnICsgJyAnOwogIH0KCiAgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMuc3Vic3RyaW5nKDAsIGNsYXNzTmFtZXMubGVuZ3RoIC0gMSk7CiAgcmV0dXJuIGNsYXNzTmFtZXM7Cn0KLyoqCiAqIENyZWF0ZSB0aGUgc3R5bGUgYXR0cmlidXRlLgogKiBAbmFtZSBjcmVhdGVTdHlsZQogKiBAZnVuY3Rpb24KICogQHBhcmFtIHtBbnNlckpzb25FbnRyeX0uCiAqIEByZXR1cm4ge09iamVjdH0gcmV0dXJucyB0aGUgc3R5bGUgb2JqZWN0CiAqLwoKCmZ1bmN0aW9uIGNyZWF0ZVN0eWxlKGJ1bmRsZSkgewogIHZhciBzdHlsZSA9IHt9OwoKICBpZiAoYnVuZGxlLmJnKSB7CiAgICBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAicmdiKCIuY29uY2F0KGJ1bmRsZS5iZywgIikiKTsKICB9CgogIGlmIChidW5kbGUuZmcpIHsKICAgIHN0eWxlLmNvbG9yID0gInJnYigiLmNvbmNhdChidW5kbGUuZmcsICIpIik7CiAgfQoKICByZXR1cm4gc3R5bGU7Cn0KCmZ1bmN0aW9uIGFuc2lUb0pTT04oaW5wdXQpIHsKICB2YXIgdXNlQ2xhc3NlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgaW5wdXQgPSBlc2NhcGVDYXJyaWFnZVJldHVybihpbnB1dCk7CiAgcmV0dXJuIEFuc2VyLmFuc2lUb0pzb24oaW5wdXQsIHsKICAgIGpzb246IHRydWUsCiAgICByZW1vdmVfZW1wdHk6IHRydWUsCiAgICB1c2VfY2xhc3NlczogdXNlQ2xhc3NlcwogIH0pOwp9CgpmdW5jdGlvbiBjb252ZXJ0QnVuZGxlSW50b1JlYWN0KHVzZUNsYXNzZXMsIGxpbmtpZnksIGJ1bmRsZSwga2V5KSB7CiAgdmFyIHN0eWxlID0gdXNlQ2xhc3NlcyA/IHt9IDogY3JlYXRlU3R5bGUoYnVuZGxlKTsKICB2YXIgY2xhc3NOYW1lID0gdXNlQ2xhc3NlcyA/IGNyZWF0ZUNsYXNzKGJ1bmRsZSkgOiAnJzsKICB2YXIgY29udGVudCA9IGJ1bmRsZS5jb250ZW50OwoKICBpZiAobGlua2lmeSkgewogICAgY29udGVudCA9IGJ1bmRsZS5jb250ZW50LnNwbGl0KCcgJykucmVkdWNlKGZ1bmN0aW9uICh3b3Jkcywgd29yZCwgaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgICAgd29yZHMucHVzaCgnICcpOwogICAgICB9CgogICAgICBpZiAoIUxJTktfUkVHRVgudGVzdCh3b3JkKSkgewogICAgICAgIHdvcmRzLnB1c2god29yZCk7CiAgICAgICAgcmV0dXJuIHdvcmRzOwogICAgICB9CgogICAgICB3b3Jkcy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAga2V5OiBpbmRleCwKICAgICAgICBocmVmOiB3b3JkLAogICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgcmVsOiAibm9vcGVuZXIgbm9yZWZlcmVyIiwKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDg0CiAgICAgICAgfSwKICAgICAgICBfX3NlbGY6IHRoaXMKICAgICAgfSwgd29yZCkpOwogICAgICByZXR1cm4gd29yZHM7CiAgICB9LCBbXSk7CiAgfQoKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLAogICAgc3R5bGU6IHN0eWxlLAogICAga2V5OiBrZXksCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA5MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIGNvbnRlbnQpOwp9CgpleHBvcnQgZnVuY3Rpb24gUmF3TG9nZ2VyKF9yZWYpIHsKICB2YXIgcGFydGljYWwgPSBfcmVmLnBhcnRpY2FsLAogICAgICBfcmVmJGluZGV4ID0gX3JlZi5pbmRleCwKICAgICAgaW5kZXggPSBfcmVmJGluZGV4ID09PSB2b2lkIDAgPyAwIDogX3JlZiRpbmRleCwKICAgICAgX3JlZiRmb2xkYWJsZSA9IF9yZWYuZm9sZGFibGUsCiAgICAgIGZvbGRhYmxlID0gX3JlZiRmb2xkYWJsZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGZvbGRhYmxlLAogICAgICBfcmVmJHVzZUNsYXNzZXMgPSBfcmVmLnVzZUNsYXNzZXMsCiAgICAgIHVzZUNsYXNzZXMgPSBfcmVmJHVzZUNsYXNzZXMgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiR1c2VDbGFzc2VzLAogICAgICBfcmVmJGxpbmtpZnkgPSBfcmVmLmxpbmtpZnksCiAgICAgIGxpbmtpZnkgPSBfcmVmJGxpbmtpZnkgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRsaW5raWZ5OwoKICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUocGFydGljYWwuZm9sZCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBmb2xkID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0Rm9sZCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBsaW5lcyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIHBhcnRpY2FsLmNvbnRlbnQuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uIChsaW5lLCBpbmRleCkgewogICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiBzdHlsZXMubG9nTGluZSwKICAgICAga2V5OiBpbmRleCwKICAgICAgX19zb3VyY2U6IHsKICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgIGxpbmVOdW1iZXI6IDExNQogICAgICB9LAogICAgICBfX3NlbGY6IHRoaXMKICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiAxMTYKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9KSwgYW5zaVRvSlNPTihsaW5lKS5tYXAoY29udmVydEJ1bmRsZUludG9SZWFjdC5iaW5kKG51bGwsIHVzZUNsYXNzZXMsIGxpbmtpZnkpKSk7CiAgfSkpOwoKICBpZiAoZm9sZGFibGUpIHsKICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIGNsYXNzTmFtZTogZm9sZCA/IHN0eWxlcy5mb2xkIDogc3R5bGVzLmZvbGRPcGVuLAogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogMTI2CiAgICAgIH0sCiAgICAgIF9fc2VsZjogdGhpcwogICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBrZXk6ICJmb2xkZXItcGxhY2Vob2xkZXItIi5jb25jYXQoaW5kZXgpLAogICAgICBjbGFzc05hbWU6IHN0eWxlcy5mb2xkTGluZSwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICByZXR1cm4gc2V0Rm9sZCghZm9sZCk7CiAgICAgIH0sCiAgICAgIF9fc291cmNlOiB7CiAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiAxMjcKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9LCBhbnNpVG9KU09OKGxhYmVsKS5tYXAoY29udmVydEJ1bmRsZUludG9SZWFjdC5iaW5kKG51bGwsIHVzZUNsYXNzZXMsIGxpbmtpZnkpKSksIGxpbmVzKTsKICB9CgogIHJldHVybiBsaW5lczsKfQoKaWYgKHR5cGVvZiBSYXdMb2dnZXIgIT09ICd1bmRlZmluZWQnICYmIFJhd0xvZ2dlciAmJiBSYXdMb2dnZXIgPT09IE9iamVjdChSYXdMb2dnZXIpICYmIE9iamVjdC5pc0V4dGVuc2libGUoUmF3TG9nZ2VyKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYXdMb2dnZXIsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJSYXdMb2dnZXIiLAogICAgICBmaWxlbmFtZTogInNyYy9SYXdMb2dnZXIudHN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKExJTktfUkVHRVgsICJMSU5LX1JFR0VYIiwgIi9Vc2Vycy9yYW9oYWkvd29ya3MvcmVhY3QtYW5zaS9zcmMvUmF3TG9nZ2VyLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGNyZWF0ZUNsYXNzLCAiY3JlYXRlQ2xhc3MiLCAiL1VzZXJzL3Jhb2hhaS93b3Jrcy9yZWFjdC1hbnNpL3NyYy9SYXdMb2dnZXIudHN4Iik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY3JlYXRlU3R5bGUsICJjcmVhdGVTdHlsZSIsICIvVXNlcnMvcmFvaGFpL3dvcmtzL3JlYWN0LWFuc2kvc3JjL1Jhd0xvZ2dlci50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihhbnNpVG9KU09OLCAiYW5zaVRvSlNPTiIsICIvVXNlcnMvcmFvaGFpL3dvcmtzL3JlYWN0LWFuc2kvc3JjL1Jhd0xvZ2dlci50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcihjb252ZXJ0QnVuZGxlSW50b1JlYWN0LCAiY29udmVydEJ1bmRsZUludG9SZWFjdCIsICIvVXNlcnMvcmFvaGFpL3dvcmtzL3JlYWN0LWFuc2kvc3JjL1Jhd0xvZ2dlci50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihSYXdMb2dnZXIsICJSYXdMb2dnZXIiLCAiL1VzZXJzL3Jhb2hhaS93b3Jrcy9yZWFjdC1hbnNpL3NyYy9SYXdMb2dnZXIudHN4Iik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmxlYXZlTW9kdWxlOwogIGxlYXZlTW9kdWxlICYmIGxlYXZlTW9kdWxlKG1vZHVsZSk7Cn0pKCk7"},{"version":3,"sources":["/Users/raohai/works/react-ansi/src/RawLogger.tsx"],"names":["React","useState","Anser","escapeCarriageReturn","styles","LINK_REGEX","createClass","bundle","classNames","bg","fg","substring","length","createStyle","style","backgroundColor","color","ansiToJSON","input","useClasses","ansiToJson","json","remove_empty","use_classes","convertBundleIntoReact","linkify","key","className","content","split","reduce","words","word","index","push","test","RawLogger","partical","foldable","fold","setFold","lines","map","line","logLine","bind","foldOpen","foldLine","label"],"mappings":"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","sourcesContent":["import React, { useState, ReactNode } from 'react';\nimport Anser, { AnserJsonEntry } from 'anser';\nimport { escapeCarriageReturn } from 'escape-carriage';\nimport styles from './log.module.less';\nimport { Partical } from './matcher';\n\nconst LINK_REGEX = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/;\n\n\n/**\n * Create a class string.\n * @name createClass\n * @function\n * @param {AnserJsonEntry}.\n * @return {String} class name(s)\n */\nfunction createClass(bundle: AnserJsonEntry) {\n  let classNames: string = '';\n\n  if (!bundle.bg && !bundle.fg) {\n    return '';\n  }\n  if (bundle.bg) {\n    classNames += bundle.bg + ' ';\n  }\n  if (bundle.fg) {\n    classNames += bundle.fg + ' ';\n  }\n\n  classNames = classNames.substring(0, classNames.length - 1);\n  return classNames;\n}\n\n/**\n * Create the style attribute.\n * @name createStyle\n * @function\n * @param {AnserJsonEntry}.\n * @return {Object} returns the style object\n */\nfunction createStyle(bundle: AnserJsonEntry) {\n  const style: { backgroundColor?: string; color?: string } = {};\n  if (bundle.bg) {\n    style.backgroundColor = `rgb(${bundle.bg})`;\n  }\n  if (bundle.fg) {\n    style.color = `rgb(${bundle.fg})`;\n  }\n\n  return style;\n}\n\nfunction ansiToJSON(input: string, useClasses = false) {\n  input = escapeCarriageReturn(input);\n  return Anser.ansiToJson(input, {\n    json: true,\n    remove_empty: true,\n    use_classes: useClasses,\n  });\n}\n\nfunction convertBundleIntoReact(\n  useClasses: boolean,\n  linkify: boolean,\n  bundle: AnserJsonEntry,\n  key: number\n) {\n  const style = useClasses ? {} : createStyle(bundle);\n  const className = useClasses ? createClass(bundle) : '';\n\n  let content: ReactNode[] | string = bundle.content;\n  if (linkify) {\n    content = bundle.content.split(' ').reduce(\n      (words, word, index) => {\n        if (index === 0) {\n          words.push(' ');\n        }\n\n        if (!LINK_REGEX.test(word)) {\n          words.push(word);\n          return words;\n        }\n\n        words.push(<a key={index} href={word} target=\"_blank\" rel=\"noopener noreferer\">\n          {word}\n        </a>);\n\n        return words;\n      }, [] as React.ReactNode[]);\n    }\n  return <span className={className} style={style} key={key}>\n    {content}\n  </span>;\n}\n\nexport function RawLogger({\n  partical,\n  index = 0,\n  foldable = false,\n  useClasses = false,\n  linkify = false,\n}: {\n  partical: Partical;\n  index: number;\n  foldable?: boolean;\n  useClasses?: boolean;\n  linkify?: boolean;\n}) {\n  const [fold, setFold] = useState(partical.fold);\n\n  const lines = (\n    <>\n      {partical.content.split('\\n').map((line, index) => {\n        return (\n          <div className={styles.logLine} key={index}>\n            <a />\n            {ansiToJSON(line).map(convertBundleIntoReact.bind(null, useClasses, linkify))}\n          </div>\n        );\n      })}\n    </>\n  );\n\n  if (foldable) {\n    return (\n      <div className={fold ? styles.fold : styles.foldOpen}>\n        <div\n          key={`folder-placeholder-${index}`}\n          className={styles.foldLine}\n          onClick={() => setFold(!fold)}\n        >\n          {ansiToJSON(label).map(convertBundleIntoReact.bind(null, useClasses, linkify))}\n        </div>\n        {lines}\n      </div>\n    );\n  }\n\n  return lines;\n}\n"]}]}