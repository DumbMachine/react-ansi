{"remainingRequest":"/Users/raohai/works/react-ansi/node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js??ref--11-1!/Users/raohai/works/react-ansi/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js??ref--11-2!/Users/raohai/works/react-ansi/node_modules/_source-map-loader@0.2.4@source-map-loader/index.js!/Users/raohai/works/react-ansi/src/index.tsx","dependencies":[{"path":"/Users/raohai/works/react-ansi/src/index.tsx","mtime":1559150445188},{"path":"/Users/raohai/works/react-ansi/node_modules/_cache-loader@3.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/raohai/works/react-ansi/node_modules/_source-map-loader@0.2.4@source-map-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMvcmFvaGFpL3dvcmtzL3JlYWN0LWFuc2kvc3JjL2luZGV4LnRzeCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmVudGVyTW9kdWxlOwogIGVudGVyTW9kdWxlICYmIGVudGVyTW9kdWxlKG1vZHVsZSk7Cn0pKCk7CgovKioKICogQW4gZm9sZGFibGUgYW5zaSBsb2dnZXIgZm9yIHJlYWN0CiAqIEluc3BpcmVkIGJ5IGFuc2ktdG8tcmVhY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9udGVyYWN0L250ZXJhY3QvYmxvYi9tYXN0ZXIvcGFja2FnZXMvYW5zaS10by1yZWFjdAogKi8KaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgXyB9IGZyb20gJy4vdXRpbHMvaTE4bic7CmltcG9ydCB7IGRlZmF1bHRTcGxpdGVycyB9IGZyb20gJy4vU3BsaXRlcic7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi9sb2cubW9kdWxlLmxlc3MnOwppbXBvcnQgeyBSYXdMb2dnZXIgfSBmcm9tICcuL1Jhd0xvZ2dlcic7CgppZiAodHlwZW9mIEZvbGRhYmxlTG9nZ2VyUHJvcHMgIT09ICd1bmRlZmluZWQnICYmIEZvbGRhYmxlTG9nZ2VyUHJvcHMgJiYgRm9sZGFibGVMb2dnZXJQcm9wcyA9PT0gT2JqZWN0KEZvbGRhYmxlTG9nZ2VyUHJvcHMpICYmIE9iamVjdC5pc0V4dGVuc2libGUoRm9sZGFibGVMb2dnZXJQcm9wcykpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9sZGFibGVMb2dnZXJQcm9wcywgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkZvbGRhYmxlTG9nZ2VyUHJvcHMiLAogICAgICBmaWxlbmFtZTogInNyYy9pbmRleC50c3giCiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZvbGRhYmxlTG9nZ2VyKF9yZWYpIHsKICB2YXIgc3R5bGUgPSBfcmVmLnN0eWxlLAogICAgICBib2R5U3R5bGUgPSBfcmVmLmJvZHlTdHlsZSwKICAgICAgbG9nID0gX3JlZi5sb2c7CiAgdmFyIGJvZHlSZWYgPSB1c2VSZWYobnVsbCk7CiAgdmFyIGZvbGRlZExvZ2dlciA9IGRlZmF1bHRTcGxpdGVycy5leGVjdXRlKGxvZyk7CgogIGZ1bmN0aW9uIHNjcm9sbEJvZHlUb1RvcCgpIHsKICAgIGlmICghYm9keVJlZi5jdXJyZW50KSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBib2R5UmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gMDsKICB9CgogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6IHN0eWxlcy5sb2dNYWluLAogICAgc3R5bGU6IHN0eWxlLAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogMzQKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6IHN0eWxlcy5sb2dIZWFkZXIsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiAzNQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgIGNsYXNzTmFtZTogc3R5bGVzLnJhd0xvZywKICAgIF9fc291cmNlOiB7CiAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgIGxpbmVOdW1iZXI6IDM2CiAgICB9LAogICAgX19zZWxmOiB0aGlzCiAgfSwgXygncmF3TG9nJykpKSwgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiBzdHlsZXMubG9nQm9keSwKICAgIHN0eWxlOiBib2R5U3R5bGUsCiAgICByZWY6IGJvZHlSZWYsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0MQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInByZSIsIHsKICAgIGlkOiAibG9nIiwKICAgIGNsYXNzTmFtZTogc3R5bGVzLmFuc2ksCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA0MgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIGZvbGRlZExvZ2dlci5tYXAoZnVuY3Rpb24gKHBhcnRpY2FsLCBpbmRleCkgewogICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmF3TG9nZ2VyLCB7CiAgICAgIGtleTogImxvZ2dlci1saW5lLSIuY29uY2F0KGluZGV4KSwKICAgICAgZm9sZGFibGU6IHBhcnRpY2FsLnR5cGUgPT09ICdwYXJ0aWNhbCcsCiAgICAgIHBhcnRpY2FsOiBwYXJ0aWNhbCwKICAgICAgaW5kZXg6IGluZGV4LAogICAgICBfX3NvdXJjZTogewogICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgbGluZU51bWJlcjogNDUKICAgICAgfSwKICAgICAgX19zZWxmOiB0aGlzCiAgICB9KTsKICB9KSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6IHN0eWxlcy5sb2dGb290ZXIsCiAgICBvbkNsaWNrOiBzY3JvbGxCb2R5VG9Ub3AsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NQogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICBjbGFzc05hbWU6IHN0eWxlcy5iYWNrVG9Ub3AsCiAgICBfX3NvdXJjZTogewogICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICBsaW5lTnVtYmVyOiA1NgogICAgfSwKICAgIF9fc2VsZjogdGhpcwogIH0sICJUb3AiKSkpOwp9CgppZiAodHlwZW9mIEZvbGRhYmxlTG9nZ2VyICE9PSAndW5kZWZpbmVkJyAmJiBGb2xkYWJsZUxvZ2dlciAmJiBGb2xkYWJsZUxvZ2dlciA9PT0gT2JqZWN0KEZvbGRhYmxlTG9nZ2VyKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKEZvbGRhYmxlTG9nZ2VyKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb2xkYWJsZUxvZ2dlciwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkZvbGRhYmxlTG9nZ2VyIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvaW5kZXgudHN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEZvbGRhYmxlTG9nZ2VyLCAiRm9sZGFibGVMb2dnZXIiLCAiL1VzZXJzL3Jhb2hhaS93b3Jrcy9yZWFjdC1hbnNpL3NyYy9pbmRleC50c3giKTsKfSkoKTsKCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxlYXZlTW9kdWxlID0gKHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbCA6IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKSkubGVhdmVNb2R1bGU7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["/Users/raohai/works/react-ansi/src/index.tsx"],"names":["React","useRef","_","defaultSpliters","styles","RawLogger","FoldableLogger","style","bodyStyle","log","bodyRef","foldedLogger","execute","scrollBodyToTop","current","scrollTop","logMain","logHeader","rawLog","logBody","ansi","map","partical","index","type","logFooter","backToTop"],"mappings":";;;;;;;AAAA;;;;AAIA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AACA,SAASC,CAAT,QAAkB,cAAlB;AACA,SAASC,eAAT,QAAgC,WAAhC;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;;;;;;;;;;;;;AAQA,eAAe,SAASC,cAAT,OAIS;AAAA,MAHtBC,KAGsB,QAHtBA,KAGsB;AAAA,MAFtBC,SAEsB,QAFtBA,SAEsB;AAAA,MADtBC,GACsB,QADtBA,GACsB;AACtB,MAAMC,OAAO,GAAGT,MAAM,CAAiB,IAAjB,CAAtB;AACA,MAAMU,YAAY,GAAGR,eAAe,CAACS,OAAhB,CAAwBH,GAAxB,CAArB;;AAEA,WAASI,eAAT,GAA2B;AACzB,QAAI,CAACH,OAAO,CAACI,OAAb,EAAsB;AACpB;AACD;;AACDJ,IAAAA,OAAO,CAACI,OAAR,CAAgBC,SAAhB,GAA4B,CAA5B;AACD;;AAED,SACE;AAAK,IAAA,SAAS,EAAEX,MAAM,CAACY,OAAvB;AAAgC,IAAA,KAAK,EAAET,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAEH,MAAM,CAACa,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,SAAS,EAAEb,MAAM,CAACc,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,CAAC,CAAC,QAAD,CADJ,CADF,CADF,EAOE;AAAK,IAAA,SAAS,EAAEE,MAAM,CAACe,OAAvB;AAAgC,IAAA,KAAK,EAAEX,SAAvC;AAAkD,IAAA,GAAG,EAAEE,OAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,EAAE,EAAC,KAAR;AAAc,IAAA,SAAS,EAAEN,MAAM,CAACgB,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGT,YAAY,CAACU,GAAb,CAAiB,UAACC,QAAD,EAAWC,KAAX,EAAqB;AACrC,WACE,oBAAC,SAAD;AACE,MAAA,GAAG,wBAAiBA,KAAjB,CADL;AAEE,MAAA,QAAQ,EAAED,QAAQ,CAACE,IAAT,KAAkB,UAF9B;AAGE,MAAA,QAAQ,EAAEF,QAHZ;AAIE,MAAA,KAAK,EAAEC,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAQD,GATA,CADH,CADF,CAPF,EAqBE;AAAK,IAAA,SAAS,EAAEnB,MAAM,CAACqB,SAAvB;AAAkC,IAAA,OAAO,EAAEZ,eAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAET,MAAM,CAACsB,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,CArBF,CADF;AA2BD;;;;;;;;;;;;;;;;;;;;;;0BA1CuBpB,c","sourcesContent":["/**\n * An foldable ansi logger for react\n * Inspired by ansi-to-react: https://github.com/nteract/nteract/blob/master/packages/ansi-to-react\n */\nimport React, { useRef } from 'react';\nimport { _ } from './utils/i18n';\nimport { defaultSpliters } from './Spliter';\n\nimport styles from './log.module.less';\nimport { RawLogger } from './RawLogger';\n\nexport interface FoldableLoggerProps {\n  log: string;\n  style?: React.CSSProperties;\n  bodyStyle?: React.CSSProperties;\n}\n\nexport default function FoldableLogger({\n  style,\n  bodyStyle,\n  log,\n}: FoldableLoggerProps) {\n  const bodyRef = useRef<HTMLDivElement>(null);\n  const foldedLogger = defaultSpliters.execute(log);\n\n  function scrollBodyToTop() {\n    if (!bodyRef.current) {\n      return;\n    }\n    bodyRef.current.scrollTop = 0;\n  }\n\n  return (\n    <div className={styles.logMain} style={style}>\n      <div className={styles.logHeader}>\n        <button className={styles.rawLog}>\n          {_('rawLog')}\n        </button>\n      </div>\n\n      <div className={styles.logBody} style={bodyStyle} ref={bodyRef}>\n        <pre id=\"log\" className={styles.ansi}>\n          {foldedLogger.map((partical, index) => {\n            return (\n              <RawLogger\n                key={`logger-line-${index}`}\n                foldable={partical.type === 'partical'}\n                partical={partical}\n                index={index}\n              />\n            );\n          })}\n        </pre>\n      </div>\n      <div className={styles.logFooter} onClick={scrollBodyToTop}>\n        <a className={styles.backToTop}>Top</a>\n      </div>\n    </div>\n  );\n}\n"]}]}